function b(a){var c=a||{};this.h=this.e=!1;void 0==a.visible&&(a.visible=!0);void 0==a.shadow&&(a.shadow="7px -3px 5px rgba(88,88,88,0.7)");void 0==a.anchor&&(a.anchor=f.BOTTOM);void 0==a.offsetSize&&(a.offsetSize=0);this.da(c)}b.prototype=new google.b.X;window.RichMarker=b;b.prototype.n=function(){return this.get("visible")};b.prototype.getVisible=b.prototype.n;b.prototype.T=function(a){this.set("visible",a)};b.prototype.setVisible=b.prototype.T;
b.prototype.V=function(){this.e&&(this.a.style.display=this.n()?"":"none",this.f())};b.prototype.visible_changed=b.prototype.V;b.prototype.R=function(a){this.set("flat",!!a)};b.prototype.setFlat=b.prototype.R;b.prototype.u=function(){return this.get("flat")};b.prototype.getFlat=b.prototype.u;b.prototype.J=function(){return this.get("width")};b.prototype.getWidth=b.prototype.J;b.prototype.F=function(){return this.get("height")};b.prototype.getHeight=b.prototype.F;
b.prototype.S=function(a){this.set("shadow",a);this.m()};b.prototype.setShadow=b.prototype.S;b.prototype.v=function(){return this.get("shadow")};b.prototype.getShadow=b.prototype.v;b.prototype.offsetSize=b.prototype.K;function g(a){return a.get("offsetSize")}b.prototype.offsetSize=b.prototype.K;b.prototype.m=function(){this.e&&(this.a.style.boxShadow=this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow=this.u()?"":this.v())};b.prototype.flat_changed=b.prototype.m;
b.prototype.U=function(a){this.set("zIndex",a)};b.prototype.setZIndex=b.prototype.U;b.prototype.j=function(){return this.get("zIndex")};b.prototype.getZIndex=b.prototype.j;b.prototype.W=function(){this.j()&&this.e&&(this.a.style.zIndex=this.j())};b.prototype.zIndex_changed=b.prototype.W;b.prototype.i=function(){return this.get("draggable")};b.prototype.getDraggable=b.prototype.i;b.prototype.Q=function(a){this.set("draggable",!!a)};b.prototype.setDraggable=b.prototype.Q;
b.prototype.r=function(){this.e&&(this.i()?h(this,this.a):k(this))};b.prototype.draggable_changed=b.prototype.r;b.prototype.H=function(){return this.get("position")};b.prototype.getPosition=b.prototype.H;b.prototype.A=function(a){this.set("position",a)};b.prototype.setPosition=b.prototype.A;b.prototype.N=function(){this.f()};b.prototype.position_changed=b.prototype.N;b.prototype.s=function(){return this.get("anchor")};b.prototype.getAnchor=b.prototype.s;
b.prototype.O=function(a){this.set("anchor",a)};b.prototype.setAnchor=b.prototype.O;b.prototype.C=function(){this.f()};b.prototype.anchor_changed=b.prototype.C;function l(a){var c=document.createElement("DIV");c.innerHTML=a;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(a=document.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);return a}function n(a){if(a)for(var c;c=a.firstChild;)a.removeChild(c)}b.prototype.P=function(a){this.set("content",a)};
b.prototype.setContent=b.prototype.P;b.prototype.t=function(){return this.get("content")};b.prototype.getContent=b.prototype.t;
b.prototype.q=function(){if(this.c){n(this.c);var a=this.t();if(a){"string"==typeof a&&(a=a.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),a=l(a));this.c.appendChild(a);for(var c=this,a=this.c.getElementsByTagName("IMG"),d=0,e;e=a[d];d++)google.b.event.d(e,"mousedown",function(a){c.i()&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1)}),google.b.event.d(e,"load",function(){c.f()});google.b.event.g(this,"domready")}this.e&&this.f()}};b.prototype.content_changed=b.prototype.q;
function p(a,c){if(a.e){var d="";if(-1!==navigator.userAgent.indexOf("Gecko/"))"dragging"==c&&(d="-moz-grabbing"),"dragready"==c&&(d="-moz-grab");else if("dragging"==c||"dragready"==c)d="move";"draggable"==c&&(d="pointer");a.a.style.cursor!=d&&(a.a.style.cursor=d)}}
function q(a,c){if(a.i()&&!a.h){a.h=!0;var d=a.G();a.w=d.get("draggable");d.set("draggable",!1);a.o=c.clientX;a.p=c.clientY;p(a,"dragready");a.a.style.MozUserSelect="none";a.a.style.KhtmlUserSelect="none";a.a.style.WebkitUserSelect="none";a.a.unselectable="on";a.a.onselectstart=function(){return!1};r(a);google.b.event.g(a,"dragstart")}}
function t(a){a.i()&&a.h&&(a.h=!1,a.G().set("draggable",a.w),a.o=a.p=a.w=null,a.a.style.MozUserSelect="",a.a.style.KhtmlUserSelect="",a.a.style.WebkitUserSelect="",a.a.unselectable="off",a.a.onselectstart=function(){},u(a),p(a,"draggable"),google.b.event.g(a,"dragend"),a.f())}
function v(a,c){if(a.i()&&a.h){var d=a.o-c.clientX,e=a.p-c.clientY;a.o=c.clientX;a.p=c.clientY;d=parseInt(a.a.style.left,10)-d;e=parseInt(a.a.style.top,10)-e;a.a.style.left=d+"px";a.a.style.top=e+"px";var m=w(a),d=new google.b.Y(d-m.width,e-m.height),e=a.I();a.A(e.$(d));p(a,"dragging");google.b.event.g(a,"drag")}else t(a)}function k(a){a.l&&(google.b.event.removeListener(a.l),delete a.l);p(a,"")}function h(a,c){c&&(a.l=google.b.event.d(c,"mousedown",function(c){q(a,c)}),p(a,"draggable"))}
function r(a){a.a.setCapture?(a.a.setCapture(!0),a.k=[google.b.event.d(a.a,"mousemove",function(c){v(a,c)},!0),google.b.event.d(a.a,"mouseup",function(){t(a);a.a.releaseCapture()},!0)]):a.k=[google.b.event.d(window,"mousemove",function(c){v(a,c)},!0),google.b.event.d(window,"mouseup",function(){t(a)},!0)]}function u(a){if(a.k){for(var c=0,d;d=a.k[c];c++)google.b.event.removeListener(d);a.k.length=0}}
function w(a){var c=a.s();if("object"==typeof c)return c;var d=new google.b.Z(0,0);if(!a.c)return d;var e=g(a);a=g(a);switch(c){case f.TOP:d.width=-e/2;break;case f.TOP_RIGHT:d.width=-e;break;case f.LEFT:d.height=-a/2;break;case f.MIDDLE:d.width=-e/2;d.height=-a/2;break;case f.RIGHT:d.width=-e;d.height=-a/2;break;case f.BOTTOM_LEFT:d.height=-a;break;case f.BOTTOM:d.width=-e/2;d.height=-a;break;case f.BOTTOM_RIGHT:d.width=-e,d.height=-a}return d}
b.prototype.L=function(){this.a||(this.a=document.createElement("DIV"),this.a.style.position="absolute");this.j()&&(this.a.style.zIndex=this.j());this.a.style.display=this.n()?"":"none";if(!this.c){this.c=document.createElement("DIV");this.a.appendChild(this.c);var a=this;google.b.event.d(this.c,"click",function(c){google.b.event.g(a,"click",c)});google.b.event.d(this.c,"mouseover",function(c){google.b.event.g(a,"mouseover",c)});google.b.event.d(this.c,"mouseout",function(c){google.b.event.g(a,"mouseout",
c)})}this.e=!0;this.q();this.m();this.r();var c=this.ba();c&&c.ca.appendChild(this.a);google.b.event.g(this,"ready")};b.prototype.onAdd=b.prototype.L;b.prototype.f=function(){if(this.e&&!this.h){var a=this.I();if(a){var c=this.get("position"),a=a.aa(c),c=w(this);this.a.style.top=a.y+c.height+"px";this.a.style.left=a.x+c.width+"px";a=g(this);c=g(this);a!=this.get("width")&&this.set("width",a);c!=this.get("height")&&this.set("height",c)}}};b.prototype.draw=b.prototype.f;
b.prototype.M=function(){this.a&&this.a.parentNode&&this.a.parentNode.removeChild(this.a);k(this)};b.prototype.onRemove=b.prototype.M;var f={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=f;"undefined"!==typeof exports?("undefined"!==typeof module&&module.D&&(exports=module.D=b),exports.B=_):root.B=_;
